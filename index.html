<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>कारक प्रश्नावली</title>
<style>
body {
  font-family: 'Noto Sans Devanagari', Arial, sans-serif;
  background: #f4f9ff;
  margin: 0;
  padding: 20px;
  text-align: center;
}
h1 { color: #2a4d69; }
#scoreBoard { font-size:20px; margin:15px 0; font-weight:bold; color:#d35400; }
.question {
  background:#fff;
  border-radius:10px;
  padding:15px;
  margin:10px auto;
  box-shadow:0 4px 8px rgba(0,0,0,0.1);
  max-width:650px;
  text-align:left;
}
select { padding:5px; font-size:16px; margin:0 4px; }
button {
  background:#2a9d8f; color:#fff; border:none; padding:12px 20px; border-radius:8px;
  font-size:16px; cursor:pointer; margin-top:15px;
}
button:hover { background:#21867a; }
#result { margin-top:20px; padding:15px; background:#fff3cd; border-radius:10px;
  display:none; text-align:left; white-space:pre-wrap; }
.star {
  position: fixed;
  color: gold;
  font-size: 24px;
  pointer-events: none;
  animation: floatStar 6s linear forwards;
}
@keyframes floatStar {
  from { transform: translate(0,0) rotate(0deg); opacity:1; }
  to { transform: translate(var(--x), var(--y)) rotate(720deg); opacity:0; }
}
</style>
</head>
<body>
<h1>कारक प्रश्नावली</h1>
<div id="scoreBoard">आपका स्कोर यहाँ दिखेगा</div>
<div id="quiz"></div>
<button onclick="submitQuiz()">जमा करें</button>
<div id="result"></div>

<script>
const options = ["ने","के","की","से","को","में","का","पर","हे","अरे","वाह"];

let questions = [
  { text:"राम ______ पिता ______ मृत्यु हो गई।", eng:"Ram's father passed away.", answers:["के","की"], explanation:"राम के पिता, पिता की मृत्यु - संबंध कारक।" },
  { text:"चोर ______ हथौड़े ______ ताला तोड़ा।", eng:"The thief broke the lock with a hammer.", answers:["ने","से"], explanation:"चोर ने - कर्ता कारक। हथौड़े से - करण कारक।" },
  { text:"बीना ______ सोने ______ चूड़ियाँ चोरी हो गईं।", eng:"Bina's gold bangles were stolen.", answers:["की","की"], explanation:"बीना की और सोने की - संबंध कारक।" }
  // You can add the remaining questions similarly
];

function shuffle(array){ for(let i=array.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [array[i],array[j]]=[array[j],array[i]]; } }

function loadQuiz(){
  shuffle(questions);
  const quizDiv = document.getElementById("quiz");
  quizDiv.innerHTML = "";
  questions.forEach((q,i)=>{
    let parts = q.text.split("______");
    let html = `<p><b>${i+1}.</b> `;
    parts.forEach((part, idx)=>{
      html += part;
      if(idx < q.answers.length){
        html += `<select id="q${i}_${idx}"><option value="">-- चुनें --</option>` + options.map(o=>`<option value="${o}">${o}</option>`).join("") + `</select>`;
      }
    });
    html += `</p><p style="color:#555">(${q.eng})</p>`;
    let div = document.createElement("div");
    div.className="question";
    div.innerHTML = html;
    quizDiv.appendChild(div);
  });
  document.getElementById("scoreBoard").innerText="आपका स्कोर यहाँ दिखेगा";
  document.getElementById("result").style.display="none";
}

function submitQuiz(){
  let score=0, wrongQuestions=[], report="";
  questions.forEach((q,i)=>{
    let userAns = [];
    let correct = true;
    q.answers.forEach((ans, idx)=>{
      let val = document.getElementById(`q${i}_${idx}`)?.value || "कोई नहीं";
      userAns.push(val);
      if(val !== ans) correct = false;
    });
    if(correct) score++;
    else wrongQuestions.push(i+1);
    report += `${i+1}. ${q.text}\nYour Answer: ${userAns.join(", ")}\nCorrect Answer: ${q.answers.join(", ")}\nExplanation: ${q.explanation}\n\n`;
  });

  const incorrect = questions.length - score;

  document.getElementById("scoreBoard").innerText=`Score: ${score}/${questions.length} (Correct: ${score}, Incorrect: ${incorrect})`;
  let resultDiv=document.getElementById("result");
  resultDiv.style.display="block";
  resultDiv.innerText=`Full Summary:\n\n${report}\nWrong Questions: ${wrongQuestions.join(", ")}`;

  // Send email (short version)
  const email = "malini22venugopal@gmail.com";
  const subject = "Quiz Score";
  const body = `Correct: ${score}, Incorrect: ${incorrect}`;
  window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

  if(score===questions.length) launchStars();
  else if(score > questions.length/2) document.getElementById("scoreBoard").style.color='green';
  else document.getElementById("scoreBoard").style.color='#d35400';
}

function launchStars(){
  for(let i=0;i<50;i++){
    let star=document.createElement("div");
    star.className="star";
    star.innerText="★";
    star.style.left=Math.random()*window.innerWidth+"px";
    star.style.top=Math.random()*window.innerHeight+"px";
    star.style.setProperty("--x",(Math.random()*600-300)+"px");
    star.style.setProperty("--y",(Math.random()*600-300)+"px");
    document.body.appendChild(star);
    setTimeout(()=>star.remove(),6000);
  }
}

loadQuiz();
</script>
</body>
</html>
